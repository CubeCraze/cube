<script>
  import { ConnectButton } from '@rainbow-me/rainbowkit'
  import { hooks, used } from 'svelte-preprocess-react'
  import NavPageLink from './NavPageLink.svelte'
  import { useWalletClient } from 'wagmi'
  import { walletClient } from '$lib/stores'

  const wagmiStore = hooks(() => useWalletClient())

  wagmiStore.subscribe((val) => {
    walletClient.set(val?.data)
  })

  used(ConnectButton)
</script>

<div class="top-nav-wrapper">
  <div class="top-nav-content">
    <a href="/">
      <img src="pooltogether.svg" alt="PoolTogether" class="desktop-only" />
      <img src="pooltogether-small.svg" alt="PoolTogether" class="mobile-only" />
    </a>
    <react:ConnectButton />
  </div>
</div>

<nav>
  <NavPageLink href="/deposit" name="Deposit" viewBox="0 0 25 25">
    <path
      fill-rule="evenodd"
      d="M12.5 24.5C15.6826 24.5 18.7348 23.2357 20.9853 20.9853C23.2357 18.7348 24.5 15.6826 24.5 12.5C24.5 9.3174 23.2357 6.26516 20.9853 4.01472C18.7348 1.76428 15.6826 0.5 12.5 0.5C9.3174 0.5 6.26516 1.76428 4.01472 4.01472C1.76428 6.26516 0.5 9.3174 0.5 12.5C0.5 15.6826 1.76428 18.7348 4.01472 20.9853C6.26516 23.2357 9.3174 24.5 12.5 24.5ZM14 8C14 7.60218 13.842 7.22064 13.5607 6.93934C13.2794 6.65804 12.8978 6.5 12.5 6.5C12.1022 6.5 11.7206 6.65804 11.4393 6.93934C11.158 7.22064 11 7.60218 11 8V13.379L9.0605 11.4395C8.7776 11.1663 8.39869 11.0151 8.0054 11.0185C7.6121 11.0219 7.23588 11.1797 6.95777 11.4578C6.67966 11.7359 6.52191 12.1121 6.51849 12.5054C6.51507 12.8987 6.66626 13.2776 6.9395 13.5605L11.4395 18.0605C11.7208 18.3417 12.1023 18.4997 12.5 18.4997C12.8977 18.4997 13.2792 18.3417 13.5605 18.0605L18.0605 13.5605C18.3337 13.2776 18.4849 12.8987 18.4815 12.5054C18.4781 12.1121 18.3203 11.7359 18.0422 11.4578C17.7641 11.1797 17.3879 11.0219 16.9946 11.0185C16.6013 11.0151 16.2224 11.1663 15.9395 11.4395L14 13.379V8Z"
    />
  </NavPageLink>
  <NavPageLink href="/withdraw" name="Withdraw" viewBox="0 0 24 25">
    <path
      fill-rule="evenodd"
      d="M12 24.5C15.1826 24.5 18.2348 23.2357 20.4853 20.9853C22.7357 18.7348 24 15.6826 24 12.5C24 9.3174 22.7357 6.26516 20.4853 4.01472C18.2348 1.76428 15.1826 0.5 12 0.5C8.8174 0.5 5.76516 1.76428 3.51472 4.01472C1.26428 6.26516 0 9.3174 0 12.5C0 15.6826 1.26428 18.7348 3.51472 20.9853C5.76516 23.2357 8.8174 24.5 12 24.5ZM17.5605 11.4395L13.0605 6.9395C12.7792 6.65829 12.3977 6.50032 12 6.50032C11.6023 6.50032 11.2208 6.65829 10.9395 6.9395L6.4395 11.4395C6.16626 11.7224 6.01507 12.1013 6.01849 12.4946C6.02191 12.8879 6.17966 13.2641 6.45777 13.5422C6.73588 13.8203 7.1121 13.9781 7.5054 13.9815C7.89869 13.9849 8.2776 13.8337 8.5605 13.5605L10.5 11.621V17C10.5 17.3978 10.658 17.7794 10.9393 18.0607C11.2206 18.342 11.6022 18.5 12 18.5C12.3978 18.5 12.7794 18.342 13.0607 18.0607C13.342 17.7794 13.5 17.3978 13.5 17V11.621L15.4395 13.5605C15.7224 13.8337 16.1013 13.9849 16.4946 13.9815C16.8879 13.9781 17.2641 13.8203 17.5422 13.5422C17.8203 13.2641 17.9781 12.8879 17.9815 12.4946C17.9849 12.1013 17.8337 11.7224 17.5605 11.4395Z"
    />
  </NavPageLink>
  <NavPageLink href="/account" name="Account" viewBox="0 0 25 25">
    <path
      fill-rule="evenodd"
      d="M24.5 12.5C24.5 15.6826 23.2357 18.7348 20.9853 20.9853C18.7348 23.2357 15.6826 24.5 12.5 24.5C9.3174 24.5 6.26516 23.2357 4.01472 20.9853C1.76428 18.7348 0.5 15.6826 0.5 12.5C0.5 9.3174 1.76428 6.26516 4.01472 4.01472C6.26516 1.76428 9.3174 0.5 12.5 0.5C15.6826 0.5 18.7348 1.76428 20.9853 4.01472C23.2357 6.26516 24.5 9.3174 24.5 12.5ZM15.5 8C15.5 8.79565 15.1839 9.55871 14.6213 10.1213C14.0587 10.6839 13.2956 11 12.5 11C11.7044 11 10.9413 10.6839 10.3787 10.1213C9.81607 9.55871 9.5 8.79565 9.5 8C9.5 7.20435 9.81607 6.44129 10.3787 5.87868C10.9413 5.31607 11.7044 5 12.5 5C13.2956 5 14.0587 5.31607 14.6213 5.87868C15.1839 6.44129 15.5 7.20435 15.5 8ZM12.5 14C11.0639 13.9997 9.65791 14.4117 8.44912 15.1871C7.24033 15.9625 6.27957 17.0686 5.681 18.374C6.52502 19.3559 7.57141 20.1436 8.74842 20.6832C9.92543 21.2228 11.2052 21.5014 12.5 21.5C13.7948 21.5014 15.0746 21.2228 16.2516 20.6832C17.4286 20.1436 18.475 19.3559 19.319 18.374C18.7204 17.0686 17.7597 15.9625 16.5509 15.1871C15.3421 14.4117 13.9361 13.9997 12.5 14Z"
    />
  </NavPageLink>
</nav>

<style>
  div.top-nav-wrapper {
    display: flex;
    justify-content: center;
    padding: 1rem;
  }

  div.top-nav-content {
    width: 100%;
    max-width: 1280px;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  nav {
    width: 100%;
    position: fixed;
    bottom: 0;
    display: flex;
    justify-content: space-evenly;
    padding: 1rem 0;
    background-color: var(--pt-purple-600);
    border-top: 2px solid var(--pt-purple-500);
  }
</style>
